\hypertarget{_state_stack_8hpp_source}{}\doxysection{State\+Stack.\+hpp}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 }
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include "{}State.hpp"{}}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include "{}StateIdentifiers.hpp"{}}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <utility>}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <functional>}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{keyword}{class }\mbox{\hyperlink{class_state_stack}{StateStack}}}
\DoxyCodeLine{12 \{}
\DoxyCodeLine{13 \textcolor{keyword}{public}:}
\DoxyCodeLine{14     \textcolor{keyword}{enum} Action}
\DoxyCodeLine{15     \{}
\DoxyCodeLine{16         Push,}
\DoxyCodeLine{17         Pop,}
\DoxyCodeLine{18         Clear,}
\DoxyCodeLine{19     \};}
\DoxyCodeLine{20 \textcolor{keyword}{public}:}
\DoxyCodeLine{21     \textcolor{keyword}{explicit} \mbox{\hyperlink{class_state_stack}{StateStack}}(\mbox{\hyperlink{struct_state_1_1_context}{State::Context}} context);}
\DoxyCodeLine{22     }
\DoxyCodeLine{23     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{24     \textcolor{keywordtype}{void} registerState(States::ID stateID);}
\DoxyCodeLine{25 }
\DoxyCodeLine{26     \textcolor{keywordtype}{void} update(\textcolor{keyword}{const} GameTimer\& gt);}
\DoxyCodeLine{27     \textcolor{keywordtype}{void} draw();}
\DoxyCodeLine{28     \textcolor{keywordtype}{void} handleEvent(WPARAM btnState);}
\DoxyCodeLine{29     \textcolor{keywordtype}{void} handleRealtimeInput();}
\DoxyCodeLine{30 }
\DoxyCodeLine{31     \textcolor{keywordtype}{void} pushState(States::ID stateID);}
\DoxyCodeLine{32     \textcolor{keywordtype}{void} popState();}
\DoxyCodeLine{33     \textcolor{keywordtype}{void} clearStates();}
\DoxyCodeLine{34 }
\DoxyCodeLine{35     \textcolor{keywordtype}{bool} isEmpty() \textcolor{keyword}{const};}
\DoxyCodeLine{36 }
\DoxyCodeLine{37     XMFLOAT3 getCameraPos();}
\DoxyCodeLine{38     XMFLOAT3 getTargetPos();}
\DoxyCodeLine{39     \mbox{\hyperlink{class_state}{State}}* getCurrentState();}
\DoxyCodeLine{40 \textcolor{keyword}{private}:}
\DoxyCodeLine{41     State::StatePtr createState(States::ID stateID);}
\DoxyCodeLine{42     \textcolor{keywordtype}{void} applyPendingChanges();}
\DoxyCodeLine{43 }
\DoxyCodeLine{44 \textcolor{keyword}{private}:}
\DoxyCodeLine{45     \textcolor{keyword}{struct }PendingChange}
\DoxyCodeLine{46     \{}
\DoxyCodeLine{47         \textcolor{keyword}{explicit}            PendingChange(Action action, States::ID stateID = States::None);}
\DoxyCodeLine{48 }
\DoxyCodeLine{49         Action              action;}
\DoxyCodeLine{50         States::ID          stateID;}
\DoxyCodeLine{51     \};}
\DoxyCodeLine{52 }
\DoxyCodeLine{53 \textcolor{keyword}{private}:}
\DoxyCodeLine{54     std::vector<State::StatePtr>    mStack;}
\DoxyCodeLine{55     std::vector<PendingChange>  mPendingList;}
\DoxyCodeLine{56 }
\DoxyCodeLine{57     \mbox{\hyperlink{struct_state_1_1_context}{State::Context}}    mContext;}
\DoxyCodeLine{58     std::map<States::ID, std::function<State::StatePtr()>> mFactories;}
\DoxyCodeLine{59 \};}
\DoxyCodeLine{60 }
\DoxyCodeLine{61 }
\DoxyCodeLine{62 \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{63 \textcolor{keywordtype}{void} StateStack::registerState(States::ID stateID)}
\DoxyCodeLine{64 \{}
\DoxyCodeLine{65     mFactories[stateID] = [\textcolor{keyword}{this}]()}
\DoxyCodeLine{66     \{}
\DoxyCodeLine{67         \textcolor{keywordflow}{return} State::StatePtr(\textcolor{keyword}{new} T(\textcolor{keyword}{this}, \&mContext));}
\DoxyCodeLine{68     \};}
\DoxyCodeLine{69 \}}
\DoxyCodeLine{70 }

\end{DoxyCode}
